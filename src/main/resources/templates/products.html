<div class="product-grid">
    <div class="product-card" th:each="product : ${products}">
        <div class="product-img" th:text="${product.imageUrl}">๐ฆ</div>
        <div class="product-name" th:text="${product.name}">Tรชn sแบฃn phแบฉm</div>
        <div class="product-price">
            <span th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + 'โซ'">0โซ</span>
            <span class="old-price" th:if="${product.oldPrice != null}" 
                  th:text="${#numbers.formatDecimal(product.oldPrice, 0, 'COMMA', 0, 'POINT')} + 'โซ'"></span>
        </div>
        
        <!-- NแบพU ฤร ฤฤNG NHแบฌP -->
        <form th:if="${username != null}" action="/cart/add" method="post">
            <input type="hidden" name="productId" th:value="${product.id}">
            <input type="hidden" name="quantity" value="1">
            <input type="hidden" name="returnUrl" th:value="${#httpServletRequest.requestURI}">
            <button type="submit" class="add-cart-btn">Thรชm vรo giแป</button>
        </form>
        
        <!-- NแบพU CHฦฏA ฤฤNG NHแบฌP -->
        <a th:if="${username == null}" href="/login" class="add-cart-btn" style="display: block; text-align: center; text-decoration: none;">
            ฤฤng nhแบญp ฤแป mua
        </a>
    </div>
</div>
