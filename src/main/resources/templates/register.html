<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÄÄƒng kÃ½ - TapHoaPtit.online</title>
    <link rel="stylesheet" th:href="@{/css/auth.css}">
</head>
<body>
    <div class="container">
        <h2>ğŸ“ ÄÄƒng kÃ½ tÃ i khoáº£n</h2>
        
        <div th:if="${error}" class="error" th:text="${error}"></div>
        <div th:if="${success}" class="success" th:text="${success}"></div>
        
        <form method="post" action="/register" id="registerForm">
            <!-- TÃªn Ä‘Äƒng nháº­p -->
            <div class="form-group">
                <label for="username">
                    ğŸ‘¤ TÃªn Ä‘Äƒng nháº­p: <span class="required">*</span>
                </label>
                <input type="text" 
                       id="username" 
                       name="username" 
                       placeholder="Nháº­p tÃªn Ä‘Äƒng nháº­p (4-20 kÃ½ tá»±)"
                       required 
                       minlength="4"
                       maxlength="20"
                       autocomplete="username">
                <small class="hint">Chá»‰ sá»­ dá»¥ng chá»¯ cÃ¡i, sá»‘ vÃ  dáº¥u gáº¡ch dÆ°á»›i</small>
            </div>
            
            <!-- Há» tÃªn -->
            <div class="form-group">
                <label for="fullName">
                    ğŸ“› Há» vÃ  tÃªn: <span class="required">*</span>
                </label>
                <input type="text" 
                       id="fullName" 
                       name="fullName" 
                       placeholder="Nháº­p há» vÃ  tÃªn Ä‘áº§y Ä‘á»§"
                       required
                       autocomplete="name">
            </div>
            
            <!-- Email -->
            <div class="form-group">
                <label for="email">
                    ğŸ“§ Email: <span class="required">*</span>
                </label>
                <input type="email" 
                       id="email" 
                       name="email" 
                       placeholder="example@gmail.com"
                       required
                       autocomplete="email">
                <small class="hint">Email sáº½ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ xÃ¡c thá»±c tÃ i khoáº£n</small>
            </div>
            
            <!-- Sá»‘ Ä‘iá»‡n thoáº¡i -->
            <div class="form-group">
                <label for="phone">
                    ğŸ“± Sá»‘ Ä‘iá»‡n thoáº¡i:
                </label>
                <input type="tel" 
                       id="phone" 
                       name="phone" 
                       placeholder="0912345678"
                       pattern="[0-9]{10}"
                       autocomplete="tel">
                <small class="hint">10 chá»¯ sá»‘ (khÃ´ng báº¯t buá»™c)</small>
            </div>
            
            <!-- Máº­t kháº©u -->
            <div class="form-group">
                <label for="password">
                    ğŸ”’ Máº­t kháº©u: <span class="required">*</span>
                </label>
                <input type="password" 
                       id="password" 
                       name="password" 
                       placeholder="Nháº­p máº­t kháº©u (tá»‘i thiá»ƒu 6 kÃ½ tá»±)"
                       required 
                       minlength="6"
                       autocomplete="new-password">
                <small class="hint">Tá»‘i thiá»ƒu 6 kÃ½ tá»±, nÃªn cÃ³ chá»¯ hoa, sá»‘ vÃ  kÃ½ tá»± Ä‘áº·c biá»‡t</small>
            </div>
            
            <!-- XÃ¡c nháº­n máº­t kháº©u -->
            <div class="form-group">
                <label for="confirmPassword">
                    ğŸ” XÃ¡c nháº­n máº­t kháº©u: <span class="required">*</span>
                </label>
                <input type="password" 
                       id="confirmPassword" 
                       name="confirmPassword" 
                       placeholder="Nháº­p láº¡i máº­t kháº©u"
                       required 
                       minlength="6"
                       autocomplete="new-password">
                <small class="hint error-message" id="passwordError" style="display: none;">
                    âš ï¸ Máº­t kháº©u khÃ´ng khá»›p!
                </small>
            </div>
            
            <button type="submit" id="submitBtn">ÄÄƒng kÃ½</button>
        </form>
        
        <div class="link">
            <p>ÄÃ£ cÃ³ tÃ i khoáº£n? <a href="/login">ÄÄƒng nháº­p ngay</a></p>
            <p><a href="/">â† Vá» trang chá»§</a></p>
        </div>
    </div>
    
    <script>
        // Kiá»ƒm tra máº­t kháº©u khá»›p
        const password = document.getElementById('password');
        const confirmPassword = document.getElementById('confirmPassword');
        const passwordError = document.getElementById('passwordError');
        const submitBtn = document.getElementById('submitBtn');
        const form = document.getElementById('registerForm');
        
        function checkPasswordMatch() {
            if (confirmPassword.value === '') {
                passwordError.style.display = 'none';
                return true;
            }
            
            if (password.value !== confirmPassword.value) {
                passwordError.style.display = 'block';
                confirmPassword.style.borderColor = '#f44336';
                return false;
            } else {
                passwordError.style.display = 'none';
                confirmPassword.style.borderColor = '#4CAF50';
                return true;
            }
        }
        
        confirmPassword.addEventListener('input', checkPasswordMatch);
        password.addEventListener('input', checkPasswordMatch);
        
        // Validate trÆ°á»›c khi submit
        form.addEventListener('submit', function(e) {
            if (!checkPasswordMatch()) {
                e.preventDefault();
                alert('âŒ Máº­t kháº©u xÃ¡c nháº­n khÃ´ng khá»›p!');
                return false;
            }
            
            // Kiá»ƒm tra username chá»‰ chá»©a chá»¯ cÃ¡i, sá»‘ vÃ  dáº¥u gáº¡ch dÆ°á»›i
            const username = document.getElementById('username').value;
            const usernameRegex = /^[a-zA-Z0-9_]+$/;
            
            if (!usernameRegex.test(username)) {
                e.preventDefault();
                alert('âŒ TÃªn Ä‘Äƒng nháº­p chá»‰ Ä‘Æ°á»£c chá»©a chá»¯ cÃ¡i, sá»‘ vÃ  dáº¥u gáº¡ch dÆ°á»›i!');
                return false;
            }
        });
    </script>
</body>
</html>